---
// Cookie Consent Banner Component
---

<div id="cookie-consent-banner" class="hidden fixed bottom-0 left-0 right-0 bg-white border-t-2 border-primary-500 shadow-2xl z-[200] p-6">
  <div class="max-w-7xl mx-auto">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="flex-1">
        <h3 class="text-lg font-bold text-gray-900 mb-2">üç™ We Value Your Privacy</h3>
        <p class="text-gray-700 text-sm">
          We use cookies to enhance your browsing experience, analyze site traffic, and personalize content. 
          By clicking "Accept All," you consent to our use of cookies. 
          <a href="/privacy" class="text-primary-600 hover:text-primary-700 underline font-semibold">Learn more</a>
        </p>
      </div>
      <div class="flex gap-3 flex-shrink-0">
        <button 
          id="cookie-decline" 
          class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-full font-semibold hover:bg-gray-50 transition-all duration-300 whitespace-nowrap"
        >
          Decline
        </button>
        <button 
          id="cookie-accept" 
          class="px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-full font-semibold hover:shadow-lg transition-all duration-300 hover:scale-105 whitespace-nowrap"
        >
          Accept All
        </button>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  (function() {
    const banner = document.getElementById('cookie-consent-banner');
    const acceptBtn = document.getElementById('cookie-accept');
    const declineBtn = document.getElementById('cookie-decline');
    
    // Check if user has already made a choice
    const cookieConsent = localStorage.getItem('cookieConsent');
    
    if (!cookieConsent) {
      // Show banner if no consent has been given
      banner?.classList.remove('hidden');
    } else if (cookieConsent === 'accepted') {
      // Initialize analytics if accepted
      initializeAnalytics();
    }
    
    // Handle accept
    acceptBtn?.addEventListener('click', function() {
      localStorage.setItem('cookieConsent', 'accepted');
      banner?.classList.add('hidden');
      initializeAnalytics();
    });
    
    // Handle decline
    declineBtn?.addEventListener('click', function() {
      localStorage.setItem('cookieConsent', 'declined');
      banner?.classList.add('hidden');
      // Optionally disable analytics
      disableAnalytics();
    });
    
    function initializeAnalytics() {
      // Google Analytics is already loaded in the head
      // This function can be extended to enable other tracking
      if (window.gtag) {
        window.gtag('consent', 'update', {
          'analytics_storage': 'granted'
        });
      }
    }
    
    function disableAnalytics() {
      // Disable Google Analytics
      if (window.gtag) {
        window.gtag('consent', 'update', {
          'analytics_storage': 'denied'
        });
      }
      // Set GA opt-out
      window['ga-disable-G-JTKE8QLEY1'] = true;
    }
  })();
</script>

<style>
  #cookie-consent-banner {
    animation: slideUp 0.4s ease-out;
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
</style>
