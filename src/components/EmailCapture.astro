---
const { title = "Stay Updated with Restaurant Tech Insights", description = "Get monthly tips, case studies, and industry trends delivered to your inbox. No spam, unsubscribe anytime." } = Astro.props;
---

<div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl p-8 text-white">
  <div class="max-w-2xl mx-auto text-center">
    <h3 class="text-2xl md:text-3xl font-bold mb-3">{title}</h3>
    <p class="text-primary-100 mb-6">{description}</p>
    
    <form id="newsletter-form" class="flex flex-col sm:flex-row gap-3">
      <input 
        type="email" 
        id="email-input"
        name="email"
        placeholder="Enter your email"
        required
        class="flex-1 px-6 py-4 rounded-full text-gray-900 focus:outline-none focus:ring-4 focus:ring-primary-300"
      />
      <button 
        type="submit"
        class="bg-white text-primary-600 px-8 py-4 rounded-full font-semibold hover:bg-primary-50 transition-all duration-300 hover:shadow-xl whitespace-nowrap"
      >
        Subscribe
      </button>
    </form>
    
    <p class="text-primary-200 text-sm mt-4">
      We respect your privacy. Read our <a href="/privacy" class="underline hover:text-white">Privacy Policy</a>
    </p>
    
    <!-- Success Message (hidden by default) -->
    <div id="success-message" class="hidden mt-4 bg-white/20 border border-white/40 rounded-lg p-4">
      <p class="text-white font-semibold">âœ“ Thanks for subscribing! Check your email to confirm.</p>
    </div>
  </div>
</div>

<script>
  document.getElementById('newsletter-form')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target as HTMLFormElement;
    const email = (document.getElementById('email-input') as HTMLInputElement).value;
    const button = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    const successMessage = document.getElementById('success-message');
    
    // Disable button
    if (button) {
      button.disabled = true;
      button.textContent = 'Subscribing...';
    }
    
    // Here you would typically send to your email service (Mailchimp, etc.)
    // For now, we'll just show a success message
    setTimeout(() => {
      if (successMessage) {
        successMessage.classList.remove('hidden');
      }
      
      // Reset form
      (e.target as HTMLFormElement).reset();
      
      if (button) {
        button.disabled = false;
        button.textContent = 'Subscribe';
      }
      
      // Hide success message after 5 seconds
      setTimeout(() => {
        if (successMessage) {
          successMessage.classList.add('hidden');
        }
      }, 5000);
    }, 1000);
  });
</script>
